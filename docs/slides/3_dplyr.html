<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to the Tidyverse</title>
    <meta charset="utf-8" />
    <meta name="author" content="Olivier Gimenez" />
    <script src="assets/libs/header-attrs-2.11/header-attrs.js"></script>
    <link rel="stylesheet" href="assets/css/rutgers-tidyverse.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/rutgers-fonts_og.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Introduction to the Tidyverse
## Data manipulation
### Olivier Gimenez
### last updated: 2022-05-16

---




# **Tidyverse**

- **Ordocosme** in üá´üá∑ with _Tidy_ for "bien rang√©" and _verse_ for "univers"

- A collection of R üì¶ developed by H. Wickham and others at Rstudio

&lt;img src="assets/img/wickham_president.jpg" width="50%" style="display: block; margin: auto;" /&gt;


---

# **Tidyverse**

* "A framework for managing data that aims at making the cleaning and preparing steps [muuuuuuuch] easier" (Julien Barnier).

* Main characteristics of a tidy dataset:
    - each variable is a column
    - each observation is a raw
    - each value is in a different cell

&lt;img src="assets/img/tidydata.png" width="80%" style="display: block; margin: auto;" /&gt;


---

# Is this dataset tidy?


```r
#&gt; # A tibble: 12 x 4
#&gt;   country      year type           count
#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;
#&gt; 1 Afghanistan  1999 cases            745
#&gt; 2 Afghanistan  1999 population  19987071
#&gt; 3 Afghanistan  2000 cases           2666
#&gt; 4 Afghanistan  2000 population  20595360
#&gt; 5 Brazil       1999 cases          37737
#&gt; 6 Brazil       1999 population 172006362
#&gt; # ‚Ä¶ with 6 more rows
```


---

# Is this dataset tidy? Nop. 


```r
#&gt; # A tibble: 12 x 4
#&gt;   country      year type           count
#&gt;   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;          &lt;int&gt;
#&gt; 1 Afghanistan  1999 cases            745
#&gt; 2 Afghanistan  1999 population  19987071
#&gt; 3 Afghanistan  2000 cases           2666
#&gt; 4 Afghanistan  2000 population  20595360
#&gt; 5 Brazil       1999 cases          37737
#&gt; 6 Brazil       1999 population 172006362
#&gt; # ‚Ä¶ with 6 more rows
```


---

# Is this dataset tidy?


```r
#&gt; # A tibble: 6 x 3
#&gt;   country      year rate             
#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
#&gt; 1 Afghanistan  1999 745/19987071     
#&gt; 2 Afghanistan  2000 2666/20595360    
#&gt; 3 Brazil       1999 37737/172006362  
#&gt; 4 Brazil       2000 80488/174504898  
#&gt; 5 China        1999 212258/1272915272
#&gt; 6 China        2000 213766/1280428583
```


---

# Is this dataset tidy? Nop.


```r
#&gt; # A tibble: 6 x 3
#&gt;   country      year rate             
#&gt; * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
#&gt; 1 Afghanistan  1999 745/19987071     
#&gt; 2 Afghanistan  2000 2666/20595360    
#&gt; 3 Brazil       1999 37737/172006362  
#&gt; 4 Brazil       2000 80488/174504898  
#&gt; 5 China        1999 212258/1272915272
#&gt; 6 China        2000 213766/1280428583
```


---

# Is this dataset tidy?


```r
# Spread across two tibbles
# cases
#&gt; # A tibble: 3 x 3
#&gt;   country     `1999` `2000`
#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
#&gt; 1 Afghanistan    745   2666
#&gt; 2 Brazil       37737  80488
#&gt; 3 China       212258 213766
# population
#&gt; # A tibble: 3 x 3
#&gt;   country         `1999`     `2000`
#&gt; * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;
#&gt; 1 Afghanistan   19987071   20595360
#&gt; 2 Brazil       172006362  174504898
#&gt; 3 China       1272915272 1280428583
```



---

# Is this dataset tidy? Nop.


```r
# Spread across two tibbles
# cases
#&gt; # A tibble: 3 x 3
#&gt;   country     `1999` `2000`
#&gt; * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
#&gt; 1 Afghanistan    745   2666
#&gt; 2 Brazil       37737  80488
#&gt; 3 China       212258 213766
# population
#&gt; # A tibble: 3 x 3
#&gt;   country         `1999`     `2000`
#&gt; * &lt;chr&gt;            &lt;int&gt;      &lt;int&gt;
#&gt; 1 Afghanistan   19987071   20595360
#&gt; 2 Brazil       172006362  174504898
#&gt; 3 China       1272915272 1280428583
```



---

# Is this dataset tidy?


```r
#&gt; # A tibble: 6 x 4
#&gt;   country      year  cases population
#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
#&gt; 1 Afghanistan  1999    745   19987071
#&gt; 2 Afghanistan  2000   2666   20595360
#&gt; 3 Brazil       1999  37737  172006362
#&gt; 4 Brazil       2000  80488  174504898
#&gt; 5 China        1999 212258 1272915272
#&gt; 6 China        2000 213766 1280428583
```


---

# Is this dataset tidy? Yes!


```r
#&gt; # A tibble: 6 x 4
#&gt;   country      year  cases population
#&gt;   &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
#&gt; 1 Afghanistan  1999    745   19987071
#&gt; 2 Afghanistan  2000   2666   20595360
#&gt; 3 Brazil       1999  37737  172006362
#&gt; 4 Brazil       2000  80488  174504898
#&gt; 5 China        1999 212258 1272915272
#&gt; 6 China        2000 213766 1280428583
```

---

# Why is the tidy format useful?

* Allows using a consistent format for which powerful tools work

* Makes data manipulation pretty natural


---

# **Tidyverse** is a collection of R üì¶


* `ggplot2` - visualising stuff

* `dplyr`, `tidyr` - data manipulation

* `purrr` - advanced programming

* `readr` - import data

* `tibble` - improved data.frame format

* `forcats` - working w/ factors

* `stringr` - working w/ chain of characters

---

# **Tidyverse** is a collection of R üì¶

* [`ggplot2` - visualising stuff](https://ggplot2.tidyverse.org/)

* [`dplyr`, `tidyr` - data manipulation](https://dplyr.tidyverse.org/)

* `purrr` - advanced programming

* [`readr` - import data](https://readr.tidyverse.org/)

* [`tibble` - improved data.frame format](https://tibble.tidyverse.org/)

* [`forcats` - working w/ factors](https://forcats.tidyverse.org/)

* [`stringr` - working w/ chain of characters](https://stringr.tidyverse.org/)



---
class: middle


# Workflow in data science

&lt;img src="assets/img/data-science-workflow.png" width="100%" style="display: block; margin: auto;" /&gt;

---
class: middle

# Workflow in data science, with **Tidyverse**

&lt;img src="assets/img/01_tidyverse_data_science.png" width="90%" style="display: block; margin: auto;" /&gt;

---
background-image: url(https://github.com/rstudio/hex-stickers/raw/master/SVG/tidyverse.svg?sanitize=true)
background-size: 100px
background-position: 90% 3%

# Load [tidyverse](www.tidyverse.org) üì¶


```r
#install.packages("tidyverse")
library(tidyverse)
```

---
class: middle

## Case study:
# [Using Twitter to predict citation rates of ecological research](https://journals.plos.org/plosone/article?id=10.1371/journal.pone.0166570)

&lt;img src="assets/img/paper_workflow.png" width="85%" style="display: block; margin: auto;" /&gt;

---
class: inverse, center, middle

# Import


---

# Import data

**readr::read_csv** function:

* creates `tibbles` instead of `data.frame`
     - no names to rows
     - allows column names with special characters (see next slide)
     - more clever on screen display than w/ data.frames (see next slide)
     - [no partial matching on column names](https://stackoverflow.com/questions/58513997/how-to-make-r-stop-accepting-partial-matches-for-column-names)
     - warning if attempt to access unexisting column

* is daaaaaamn fast üèé

---

# Import data


```r
citations_raw &lt;- read_csv('https://raw.githubusercontent.com/oliviergimenez/intro_tidyverse/master/journal.pone.0166570.s001.CSV')
citations_raw
```

```
## # A tibble: 1,599 √ó 12
##    `Journal identity` `5-year journal im‚Ä¶` `Year published` Volume Issue Authors
##    &lt;chr&gt;                             &lt;dbl&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
##  1 Ecology Letters                    16.7             2014     17 12    Morin ‚Ä¶
##  2 Ecology Letters                    16.7             2014     17 12    Jucker‚Ä¶
##  3 Ecology Letters                    16.7             2014     17 12    Calcag‚Ä¶
##  4 Ecology Letters                    16.7             2014     17 11    Segre ‚Ä¶
##  5 Ecology Letters                    16.7             2014     17 11    Kaufma‚Ä¶
##  6 Ecology Letters                    16.7             2014     17 10    Nasto ‚Ä¶
##  7 Ecology Letters                    16.7             2014     17 10    Tschir‚Ä¶
##  8 Ecology Letters                    16.7             2014     17 9     Barnec‚Ä¶
##  9 Ecology Letters                    16.7             2014     17 9     Pinto-‚Ä¶
## 10 Ecology Letters                    16.7             2014     17 9     Clough‚Ä¶
## # ‚Ä¶ with 1,589 more rows, and 6 more variables: `Collection date` &lt;chr&gt;,
## #   `Publication date` &lt;chr&gt;, `Number of tweets` &lt;dbl&gt;,
## #   `Number of users` &lt;dbl&gt;, `Twitter reach` &lt;dbl&gt;,
## #   `Number of Web of Science citations` &lt;dbl&gt;
```

---
class: inverse, center, middle

# Tidy, transform

---

# Rename columns


```r
citations_temp &lt;- rename(citations_raw,
       journal = 'Journal identity',
       impactfactor = '5-year journal impact factor',
       pubyear = 'Year published',
       colldate = 'Collection date',
       pubdate = 'Publication date',
       nbtweets = 'Number of tweets',
       woscitations = 'Number of Web of Science citations')
citations_temp
```

```
## # A tibble: 1,599 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Ecology ‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2/1/2016 9/16/2‚Ä¶       18
##  2 Ecology ‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2/1/2016 10/13/‚Ä¶       15
##  3 Ecology ‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2/1/2016 10/21/‚Ä¶        5
##  4 Ecology ‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2/1/2016 8/28/2‚Ä¶        9
##  5 Ecology ‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2/1/2016 8/28/2‚Ä¶        3
##  6 Ecology ‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2/2/2016 7/28/2‚Ä¶       27
##  7 Ecology ‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2/2/2016 8/6/20‚Ä¶        6
##  8 Ecology ‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2/2/2016 6/17/2‚Ä¶       19
##  9 Ecology ‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2/2/2016 6/12/2‚Ä¶       26
## 10 Ecology ‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2/2/2016 7/17/2‚Ä¶       44
## # ‚Ä¶ with 1,589 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Clean up column names


```r
janitor::clean_names(citations_raw)
```

```
## # A tibble: 1,599 √ó 12
##    journal_identity x5_year_journal_impact_‚Ä¶ year_published volume issue authors
##    &lt;chr&gt;                               &lt;dbl&gt;          &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
##  1 Ecology Letters                      16.7           2014     17 12    Morin ‚Ä¶
##  2 Ecology Letters                      16.7           2014     17 12    Jucker‚Ä¶
##  3 Ecology Letters                      16.7           2014     17 12    Calcag‚Ä¶
##  4 Ecology Letters                      16.7           2014     17 11    Segre ‚Ä¶
##  5 Ecology Letters                      16.7           2014     17 11    Kaufma‚Ä¶
##  6 Ecology Letters                      16.7           2014     17 10    Nasto ‚Ä¶
##  7 Ecology Letters                      16.7           2014     17 10    Tschir‚Ä¶
##  8 Ecology Letters                      16.7           2014     17 9     Barnec‚Ä¶
##  9 Ecology Letters                      16.7           2014     17 9     Pinto-‚Ä¶
## 10 Ecology Letters                      16.7           2014     17 9     Clough‚Ä¶
## # ‚Ä¶ with 1,589 more rows, and 6 more variables: collection_date &lt;chr&gt;,
## #   publication_date &lt;chr&gt;, number_of_tweets &lt;dbl&gt;, number_of_users &lt;dbl&gt;,
## #   twitter_reach &lt;dbl&gt;, number_of_web_of_science_citations &lt;dbl&gt;
```

---

# Create (or modify) columns


```r
citations &lt;- mutate(citations_temp, journal = as.factor(journal))
citations
```

```
## # A tibble: 1,599 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;fct&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Ecology ‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2/1/2016 9/16/2‚Ä¶       18
##  2 Ecology ‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2/1/2016 10/13/‚Ä¶       15
##  3 Ecology ‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2/1/2016 10/21/‚Ä¶        5
##  4 Ecology ‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2/1/2016 8/28/2‚Ä¶        9
##  5 Ecology ‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2/1/2016 8/28/2‚Ä¶        3
##  6 Ecology ‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2/2/2016 7/28/2‚Ä¶       27
##  7 Ecology ‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2/2/2016 8/6/20‚Ä¶        6
##  8 Ecology ‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2/2/2016 6/17/2‚Ä¶       19
##  9 Ecology ‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2/2/2016 6/12/2‚Ä¶       26
## 10 Ecology ‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2/2/2016 7/17/2‚Ä¶       44
## # ‚Ä¶ with 1,589 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Create (or modify) columns


```r
levels(citations$journal)
```

```
##  [1] "Animal Conservation"              "Conservation Letters"            
##  [3] "Diversity and Distributions"      "Ecological Applications"         
##  [5] "Ecology"                          "Ecology Letters"                 
##  [7] "Evolution"                        "Evolutionary Applications"       
##  [9] "Fish and Fisheries"               "Functional Ecology"              
## [11] "Global Change Biology"            "Global Ecology and Biogeography" 
## [13] "Journal of Animal Ecology"        "Journal of Applied Ecology"      
## [15] "Journal of Biogeography"          "Limnology and Oceanography"      
## [17] "Mammal Review"                    "Methods in Ecology and Evolution"
## [19] "Molecular Ecology Resources"      "New Phytologist"
```

---
class: inverse, center, middle

# Give your code some air

---

# Cleaner code with "pipe" operator `%&gt;%` which reads "and then"


```r
citations_raw %&gt;%
  rename(journal = 'Journal identity',
       impactfactor = '5-year journal impact factor',
       pubyear = 'Year published',
       colldate = 'Collection date',
       pubdate = 'Publication date',
       nbtweets = 'Number of tweets',
       woscitations = 'Number of Web of Science citations') %&gt;%
  mutate(journal = as.factor(journal))
```

```
## # A tibble: 1,599 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;fct&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Ecology ‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2/1/2016 9/16/2‚Ä¶       18
##  2 Ecology ‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2/1/2016 10/13/‚Ä¶       15
##  3 Ecology ‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2/1/2016 10/21/‚Ä¶        5
##  4 Ecology ‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2/1/2016 8/28/2‚Ä¶        9
##  5 Ecology ‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2/1/2016 8/28/2‚Ä¶        3
##  6 Ecology ‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2/2/2016 7/28/2‚Ä¶       27
##  7 Ecology ‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2/2/2016 8/6/20‚Ä¶        6
##  8 Ecology ‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2/2/2016 6/17/2‚Ä¶       19
##  9 Ecology ‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2/2/2016 6/12/2‚Ä¶       26
## 10 Ecology ‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2/2/2016 7/17/2‚Ä¶       44
## # ‚Ä¶ with 1,589 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Name object


```r
*citations &lt;- citations_raw %&gt;%
  rename(journal = 'Journal identity',
       impactfactor = '5-year journal impact factor',
       pubyear = 'Year published',
       colldate = 'Collection date',
       pubdate = 'Publication date',
       nbtweets = 'Number of tweets',
       woscitations = 'Number of Web of Science citations') %&gt;%
  mutate(journal = as.factor(journal))
```

---

# Syntax with pipe

* Verb(Subject,Complement) replaced by Subject %&gt;% Verb(Complement)


* No need to name unimportant intermediate variables


* Clear syntax (readability)

&lt;img src="assets/img/logo_pipe.png" width="40%" style="display: block; margin: auto;" /&gt;

---

# Base R from [Lise Vaudor's blog](http://perso.ens-lyon.fr/lise.vaudor/)


```r
white_and_yolk &lt;- crack(egg, add_seasoning)
omelette_batter &lt;- beat(white_and_yolk)
omelette_with_chives &lt;- cook(omelette_batter,add_chives)
```

&lt;img src="assets/img/piping_successive.jpg" width="500px" style="display: block; margin: auto;" /&gt;

---

# Piping from [Lise Vaudor's blog](http://perso.ens-lyon.fr/lise.vaudor/)


```r
egg %&gt;%
  crack(add_seasoning) %&gt;%
  beat() %&gt;%
  cook(add_chives) -&gt; omelette_with_chives
```

&lt;img src="assets/img/piping_piped.png" width="250px" style="display: block; margin: auto;" /&gt;


---
class: inverse, center, middle

# Tidy, transform

---

# Select columns


```r
citations %&gt;%
  select(journal, impactfactor, nbtweets)
```

```
## # A tibble: 1,599 √ó 3
##    journal         impactfactor nbtweets
##    &lt;fct&gt;                  &lt;dbl&gt;    &lt;dbl&gt;
##  1 Ecology Letters         16.7       18
##  2 Ecology Letters         16.7       15
##  3 Ecology Letters         16.7        5
##  4 Ecology Letters         16.7        9
##  5 Ecology Letters         16.7        3
##  6 Ecology Letters         16.7       27
##  7 Ecology Letters         16.7        6
##  8 Ecology Letters         16.7       19
##  9 Ecology Letters         16.7       26
## 10 Ecology Letters         16.7       44
## # ‚Ä¶ with 1,589 more rows
```

---

# Drop columns


```r
citations %&gt;%
  select(-Volume, -Issue, -Authors)
```

```
## # A tibble: 1,599 √ó 9
##    journal       impactfactor pubyear colldate pubdate nbtweets `Number of use‚Ä¶`
##    &lt;fct&gt;                &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;            &lt;dbl&gt;
##  1 Ecology Lett‚Ä¶         16.7    2014 2/1/2016 9/16/2‚Ä¶       18               16
##  2 Ecology Lett‚Ä¶         16.7    2014 2/1/2016 10/13/‚Ä¶       15               12
##  3 Ecology Lett‚Ä¶         16.7    2014 2/1/2016 10/21/‚Ä¶        5                4
##  4 Ecology Lett‚Ä¶         16.7    2014 2/1/2016 8/28/2‚Ä¶        9                8
##  5 Ecology Lett‚Ä¶         16.7    2014 2/1/2016 8/28/2‚Ä¶        3                3
##  6 Ecology Lett‚Ä¶         16.7    2014 2/2/2016 7/28/2‚Ä¶       27               23
##  7 Ecology Lett‚Ä¶         16.7    2014 2/2/2016 8/6/20‚Ä¶        6                6
##  8 Ecology Lett‚Ä¶         16.7    2014 2/2/2016 6/17/2‚Ä¶       19               18
##  9 Ecology Lett‚Ä¶         16.7    2014 2/2/2016 6/12/2‚Ä¶       26               23
## 10 Ecology Lett‚Ä¶         16.7    2014 2/2/2016 7/17/2‚Ä¶       44               42
## # ‚Ä¶ with 1,589 more rows, and 2 more variables: `Twitter reach` &lt;dbl&gt;,
## #   woscitations &lt;dbl&gt;
```


---

# Split a column in several columns


```r
citations %&gt;%
  separate(pubdate,c('month','day','year'),'/')
```

```
## # A tibble: 1,599 √ó 14
##    journal  impactfactor pubyear Volume Issue Authors colldate month day   year 
##    &lt;fct&gt;           &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 Ecology‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2/1/2016 9     16    2014 
##  2 Ecology‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2/1/2016 10    13    2014 
##  3 Ecology‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2/1/2016 10    21    2014 
##  4 Ecology‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2/1/2016 8     28    2014 
##  5 Ecology‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2/1/2016 8     28    2014 
##  6 Ecology‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2/2/2016 7     28    2014 
##  7 Ecology‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2/2/2016 8     6     2014 
##  8 Ecology‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2/2/2016 6     17    2014 
##  9 Ecology‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2/2/2016 6     12    2014 
## 10 Ecology‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2/2/2016 7     17    2014 
## # ‚Ä¶ with 1,589 more rows, and 4 more variables: nbtweets &lt;dbl&gt;,
## #   `Number of users` &lt;dbl&gt;, `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Transform in Date format...


```r
library(lubridate)
citations %&gt;%
  mutate(pubdate = mdy(pubdate),
         colldate = mdy(colldate))
```

```
## # A tibble: 1,599 √ó 12
##    journal       impactfactor pubyear Volume Issue Authors colldate   pubdate   
##    &lt;fct&gt;                &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;    
##  1 Ecology Lett‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2016-02-01 2014-09-16
##  2 Ecology Lett‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2016-02-01 2014-10-13
##  3 Ecology Lett‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2016-02-01 2014-10-21
##  4 Ecology Lett‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2016-02-01 2014-08-28
##  5 Ecology Lett‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2016-02-01 2014-08-28
##  6 Ecology Lett‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2016-02-02 2014-07-28
##  7 Ecology Lett‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2016-02-02 2014-08-06
##  8 Ecology Lett‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2016-02-02 2014-06-17
##  9 Ecology Lett‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2016-02-02 2014-06-12
## 10 Ecology Lett‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2016-02-02 2014-07-17
## # ‚Ä¶ with 1,589 more rows, and 4 more variables: nbtweets &lt;dbl&gt;,
## #   `Number of users` &lt;dbl&gt;, `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# ...for easy manipulation of dates


```r
library(lubridate)
citations %&gt;%
  mutate(pubdate = mdy(pubdate),
         colldate = mdy(colldate),
*        pubyear2 = year(pubdate))
```

```
## # A tibble: 1,599 √ó 13
##    journal       impactfactor pubyear Volume Issue Authors colldate   pubdate   
##    &lt;fct&gt;                &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;date&gt;     &lt;date&gt;    
##  1 Ecology Lett‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2016-02-01 2014-09-16
##  2 Ecology Lett‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2016-02-01 2014-10-13
##  3 Ecology Lett‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2016-02-01 2014-10-21
##  4 Ecology Lett‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2016-02-01 2014-08-28
##  5 Ecology Lett‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2016-02-01 2014-08-28
##  6 Ecology Lett‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2016-02-02 2014-07-28
##  7 Ecology Lett‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2016-02-02 2014-08-06
##  8 Ecology Lett‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2016-02-02 2014-06-17
##  9 Ecology Lett‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2016-02-02 2014-06-12
## 10 Ecology Lett‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2016-02-02 2014-07-17
## # ‚Ä¶ with 1,589 more rows, and 5 more variables: nbtweets &lt;dbl&gt;,
## #   `Number of users` &lt;dbl&gt;, `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;,
## #   pubyear2 &lt;dbl&gt;
```

* Check out `?lubridate::lubridate` for more functions

---

# How to join tables together?

&lt;blockquote class="twitter-tweet" data-lang="fr"&gt;&lt;p lang="en" dir="ltr"&gt;More &lt;a href="https://twitter.com/hashtag/dplyr?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#dplyr&lt;/a&gt; üîß gifs!  It took me a hella long time to wrap my head around the different types of joins when I first started learning them, so here&amp;#39;s a few examples with some excellent mini datasets from &lt;a href="https://twitter.com/hashtag/dplyr?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#dplyr&lt;/a&gt; designed specifically for this purpose! &lt;a href="https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#rstats&lt;/a&gt; &lt;a href="https://twitter.com/hashtag/tidyverse?src=hash&amp;amp;ref_src=twsrc%5Etfw"&gt;#tidyverse&lt;/a&gt; &lt;a href="https://t.co/G56fWmIZSq"&gt;pic.twitter.com/G56fWmIZSq&lt;/a&gt;&lt;/p&gt;&amp;mdash; Nic Crane (@nic_crane) &lt;a href="https://twitter.com/nic_crane/status/1064237554910806016?ref_src=twsrc%5Etfw"&gt;18 novembre 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;


[![Watch the video](assets/mp4/dplyr_join.mp4)](assets/mp4/dplyr_join.mp4)


---

## &lt;https://www.garrickadenbuie.com/project/tidyexplain/&gt;

&lt;img src="assets/img/left-join.gif" width="70%" style="display: block; margin: auto;" /&gt;




---
class: inverse, center, middle

# Easy character manipulation

---

# Select rows corresponding to papers with more than 3 authors


```r
citations %&gt;%
* filter(str_detect(Authors,'et al'))
```

```
## # A tibble: 1,280 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;fct&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Ecology ‚Ä¶         16.7    2014     17 12    Morin ‚Ä¶ 2/1/2016 9/16/2‚Ä¶       18
##  2 Ecology ‚Ä¶         16.7    2014     17 12    Jucker‚Ä¶ 2/1/2016 10/13/‚Ä¶       15
##  3 Ecology ‚Ä¶         16.7    2014     17 12    Calcag‚Ä¶ 2/1/2016 10/21/‚Ä¶        5
##  4 Ecology ‚Ä¶         16.7    2014     17 11    Segre ‚Ä¶ 2/1/2016 8/28/2‚Ä¶        9
##  5 Ecology ‚Ä¶         16.7    2014     17 11    Kaufma‚Ä¶ 2/1/2016 8/28/2‚Ä¶        3
##  6 Ecology ‚Ä¶         16.7    2014     17 10    Nasto ‚Ä¶ 2/2/2016 7/28/2‚Ä¶       27
##  7 Ecology ‚Ä¶         16.7    2014     17 10    Tschir‚Ä¶ 2/2/2016 8/6/20‚Ä¶        6
##  8 Ecology ‚Ä¶         16.7    2014     17 9     Barnec‚Ä¶ 2/2/2016 6/17/2‚Ä¶       19
##  9 Ecology ‚Ä¶         16.7    2014     17 9     Pinto-‚Ä¶ 2/2/2016 6/12/2‚Ä¶       26
## 10 Ecology ‚Ä¶         16.7    2014     17 9     Clough‚Ä¶ 2/2/2016 7/17/2‚Ä¶       44
## # ‚Ä¶ with 1,270 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Get column with rows corresponding to papers with more than 3 authors


```r
citations %&gt;%
* filter(str_detect(Authors,'et al')) %&gt;%
* select(Authors)
```

```
## # A tibble: 1,280 √ó 1
##    Authors            
##    &lt;chr&gt;              
##  1 Morin et al        
##  2 Jucker et al       
##  3 Calcagno et al     
##  4 Segre et al        
##  5 Kaufman et al      
##  6 Nasto et al        
##  7 Tschirren et al    
##  8 Barnechi et al     
##  9 Pinto-Sanchez et al
## 10 Clough et al       
## # ‚Ä¶ with 1,270 more rows
```


---

# Select rows corresponding to papers with less than 3 authors


```r
citations %&gt;%
* filter(!str_detect(Authors,'et al'))
```

```
## # A tibble: 319 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;fct&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Ecology ‚Ä¶         16.7    2014     17 6     Neutle‚Ä¶ 2/15/20‚Ä¶ 3/17/2‚Ä¶        8
##  2 Ecology ‚Ä¶         16.7    2014     17 5     Kellne‚Ä¶ 2/15/20‚Ä¶ 2/20/2‚Ä¶       18
##  3 Ecology ‚Ä¶         16.7    2014     17 4     Griffi‚Ä¶ 2/15/20‚Ä¶ 1/16/2‚Ä¶        4
##  4 Ecology ‚Ä¶         16.7    2014     17 3     Gremer‚Ä¶ 2/15/20‚Ä¶ 1/17/2‚Ä¶        4
##  5 Ecology ‚Ä¶         16.7    2014     17 2     Cavier‚Ä¶ 2/15/20‚Ä¶ 10/17/‚Ä¶       16
##  6 Ecology ‚Ä¶         16.7    2014     17 2     Haegma‚Ä¶ 2/15/20‚Ä¶ 12/5/2‚Ä¶        9
##  7 Ecology ‚Ä¶         16.7    2013     16 12    Kearney 2/15/20‚Ä¶ 10/1/2‚Ä¶       13
##  8 Ecology ‚Ä¶         16.7    2013     16 9     Locey ‚Ä¶ 2/15/20‚Ä¶ 7/15/2‚Ä¶       28
##  9 Ecology ‚Ä¶         16.7    2013     16 8     Quinte‚Ä¶ 2/15/20‚Ä¶ 6/26/2‚Ä¶      120
## 10 Ecology ‚Ä¶         16.7    2013     16 3     Lesser‚Ä¶ 2/15/20‚Ä¶ 12/22/‚Ä¶        9
## # ‚Ä¶ with 309 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```


---

# Get column with rows corresponding to papers with less than 3 authors


```r
citations %&gt;%
* filter(!str_detect(Authors,'et al')) %&gt;%
* select(Authors)
```

```
## # A tibble: 319 √ó 1
##    Authors           
##    &lt;chr&gt;             
##  1 Neutle and Thorne 
##  2 Kellner and Asner 
##  3 Griffin and Willi 
##  4 Gremer and Venable
##  5 Cavieres          
##  6 Haegman and Loreau
##  7 Kearney           
##  8 Locey and White   
##  9 Quintero and Weins
## 10 Lesser and Jackson
## # ‚Ä¶ with 309 more rows
```


---

# Get column with rows corresponding to papers with less than 3 authors


```r
citations %&gt;%
  filter(!str_detect(Authors,'et al')) %&gt;%
* pull(Authors) %&gt;%
  head(10)
```

```
##  [1] "Neutle and Thorne"  "Kellner and Asner"  "Griffin and Willi" 
##  [4] "Gremer and Venable" "Cavieres"           "Haegman and Loreau"
##  [7] "Kearney"            "Locey and White"    "Quintero and Weins"
## [10] "Lesser and Jackson"
```


---

# Select rows corresponding to papers with less than 3 authors in journal with IF &lt; 5


```r
citations %&gt;%
* filter(!str_detect(Authors,'et al'), impactfactor &lt; 5)
```

```
## # A tibble: 77 √ó 12
##    journal   impactfactor pubyear Volume Issue Authors colldate pubdate nbtweets
##    &lt;fct&gt;            &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 Molecula‚Ä¶         4.9     2014     14 6     Gautier 2/27/20‚Ä¶ 5/14/2‚Ä¶        2
##  2 Molecula‚Ä¶         4.9     2014     14 5     Gambel‚Ä¶ 2/27/20‚Ä¶ 3/7/20‚Ä¶        7
##  3 Molecula‚Ä¶         4.9     2014     14 4     Kekkon‚Ä¶ 2/27/20‚Ä¶ 3/10/2‚Ä¶        4
##  4 Molecula‚Ä¶         4.9     2014     14 3     Bhatta‚Ä¶ 2/27/20‚Ä¶ 12/8/2‚Ä¶        0
##  5 Molecula‚Ä¶         4.9     2014     14 1     Christ‚Ä¶ 2/28/20‚Ä¶ 10/25/‚Ä¶        0
##  6 Molecula‚Ä¶         4.9     2013     13 4     Villar‚Ä¶ 2/28/20‚Ä¶ 5/2/20‚Ä¶        0
##  7 Molecula‚Ä¶         4.9     2013     13 4     Wang    2/28/20‚Ä¶ 4/25/2‚Ä¶        0
##  8 Molecula‚Ä¶         4.9     2012     12 1     Joly    2/28/20‚Ä¶ 9/7/20‚Ä¶        3
##  9 Animal C‚Ä¶         3.21    2014     17 6     Plavsic 2/9/2016 4/17/2‚Ä¶        9
## 10 Animal C‚Ä¶         3.21    2014     17 Supp‚Ä¶ Knox a‚Ä¶ 2/11/20‚Ä¶ 11/13/‚Ä¶        1
## # ‚Ä¶ with 67 more rows, and 3 more variables: `Number of users` &lt;dbl&gt;,
## #   `Twitter reach` &lt;dbl&gt;, woscitations &lt;dbl&gt;
```

---

# Convert words to lowercase


```r
citations %&gt;%
* mutate(authors_lowercase = str_to_lower(Authors)) %&gt;%
  select(authors_lowercase)
```

```
## # A tibble: 1,599 √ó 1
##    authors_lowercase  
##    &lt;chr&gt;              
##  1 morin et al        
##  2 jucker et al       
##  3 calcagno et al     
##  4 segre et al        
##  5 kaufman et al      
##  6 nasto et al        
##  7 tschirren et al    
##  8 barnechi et al     
##  9 pinto-sanchez et al
## 10 clough et al       
## # ‚Ä¶ with 1,589 more rows
```

---

# Remove all spaces in journal names


```r
citations %&gt;%
* mutate(journal = str_remove_all(journal," ")) %&gt;%
  select(journal) %&gt;%
  unique() %&gt;%
  head(5)
```

```
## # A tibble: 5 √ó 1
##   journal                     
##   &lt;chr&gt;                       
## 1 EcologyLetters              
## 2 GlobalChangeBiology         
## 3 GlobalEcologyandBiogeography
## 4 MolecularEcologyResources   
## 5 DiversityandDistributions
```


---

# Explore üì¶ stringr and regular expressions

* Check out the [vignette on stringr](https://cran.r-project.org/web/packages/stringr/vignettes/stringr.html) for more examples on character manipulation and pattern matching functions.

* Check out the [vignette on regular expressions](https://stringr.tidyverse.org/articles/regular-expressions.html) which are a concise and flexible tool for describing patterns in strings.


---
class: inverse, center, middle

# Basic exploratory data analysis

---

# Count


```r
citations %&gt;% count(journal, sort = TRUE)
```

```
## # A tibble: 20 √ó 2
##    journal                              n
##    &lt;fct&gt;                            &lt;int&gt;
##  1 New Phytologist                    144
##  2 Ecology                            108
##  3 Evolution                          108
##  4 Global Change Biology              108
##  5 Global Ecology and Biogeography    108
##  6 Journal of Biogeography            108
##  7 Ecology Letters                    106
##  8 Diversity and Distributions        105
##  9 Animal Conservation                102
## 10 Methods in Ecology and Evolution    90
## 11 Evolutionary Applications           74
## 12 Functional Ecology                  54
## 13 Journal of Animal Ecology           54
## 14 Journal of Applied Ecology          54
## 15 Limnology and Oceanography          54
## 16 Molecular Ecology Resources         54
## 17 Conservation Letters                53
## 18 Ecological Applications             48
## 19 Fish and Fisheries                  36
## 20 Mammal Review                       31
```

---

# Count


```r
citations %&gt;%
  count(journal, pubyear)
```

```
## # A tibble: 59 √ó 3
##    journal                     pubyear     n
##    &lt;fct&gt;                         &lt;dbl&gt; &lt;int&gt;
##  1 Animal Conservation            2012    18
##  2 Animal Conservation            2013    18
##  3 Animal Conservation            2014    66
##  4 Conservation Letters           2012    17
##  5 Conservation Letters           2013    18
##  6 Conservation Letters           2014    18
##  7 Diversity and Distributions    2012    36
##  8 Diversity and Distributions    2013    33
##  9 Diversity and Distributions    2014    36
## 10 Ecological Applications        2012    24
## # ‚Ä¶ with 49 more rows
```

---

# Count sum of tweets per journal


```r
citations %&gt;%
  count(journal, wt = nbtweets, sort = TRUE)
```

```
## # A tibble: 20 √ó 2
##    journal                              n
##    &lt;fct&gt;                            &lt;dbl&gt;
##  1 Ecology Letters                   1538
##  2 Animal Conservation               1268
##  3 Journal of Applied Ecology        1012
##  4 Methods in Ecology and Evolution   699
##  5 Global Change Biology              613
##  6 Conservation Letters               542
##  7 New Phytologist                    509
##  8 Global Ecology and Biogeography    379
##  9 Ecology                            335
## 10 Evolution                          335
## 11 Journal of Animal Ecology          323
## 12 Fish and Fisheries                 261
## 13 Evolutionary Applications          238
## 14 Journal of Biogeography            209
## 15 Diversity and Distributions        200
## 16 Mammal Review                      166
## 17 Functional Ecology                 155
## 18 Molecular Ecology Resources        139
## 19 Ecological Applications            125
## 20 Limnology and Oceanography           0
```

---

# Group by variable to calculate stats


```r
citations %&gt;%
* group_by(journal) %&gt;%
* summarise(avg_tweets = mean(nbtweets))
```

```
## # A tibble: 20 √ó 2
##    journal                          avg_tweets
##    &lt;fct&gt;                                 &lt;dbl&gt;
##  1 Animal Conservation                   12.4 
##  2 Conservation Letters                  10.2 
##  3 Diversity and Distributions            1.90
##  4 Ecological Applications                2.60
##  5 Ecology                                3.10
##  6 Ecology Letters                       14.5 
##  7 Evolution                              3.10
##  8 Evolutionary Applications              3.22
##  9 Fish and Fisheries                     7.25
## 10 Functional Ecology                     2.87
## 11 Global Change Biology                  5.68
## 12 Global Ecology and Biogeography        3.51
## 13 Journal of Animal Ecology              5.98
## 14 Journal of Applied Ecology            18.7 
## 15 Journal of Biogeography                1.94
## 16 Limnology and Oceanography             0   
## 17 Mammal Review                          5.35
## 18 Methods in Ecology and Evolution       7.77
## 19 Molecular Ecology Resources            2.57
## 20 New Phytologist                        3.53
```


---

# Order stuff


```r
citations %&gt;%
  group_by(journal) %&gt;%
  summarise(avg_tweets = mean(nbtweets)) %&gt;%
* arrange(desc(avg_tweets)) # decreasing order (wo desc for increasing)
```

```
## # A tibble: 20 √ó 2
##    journal                          avg_tweets
##    &lt;fct&gt;                                 &lt;dbl&gt;
##  1 Journal of Applied Ecology            18.7 
##  2 Ecology Letters                       14.5 
##  3 Animal Conservation                   12.4 
##  4 Conservation Letters                  10.2 
##  5 Methods in Ecology and Evolution       7.77
##  6 Fish and Fisheries                     7.25
##  7 Journal of Animal Ecology              5.98
##  8 Global Change Biology                  5.68
##  9 Mammal Review                          5.35
## 10 New Phytologist                        3.53
## 11 Global Ecology and Biogeography        3.51
## 12 Evolutionary Applications              3.22
## 13 Ecology                                3.10
## 14 Evolution                              3.10
## 15 Functional Ecology                     2.87
## 16 Ecological Applications                2.60
## 17 Molecular Ecology Resources            2.57
## 18 Journal of Biogeography                1.94
## 19 Diversity and Distributions            1.90
## 20 Limnology and Oceanography             0
```


---

# What if we want to work on several columns?

&lt;img src="assets/img/dplyr_across.png" width="85%" style="display: block; margin: auto;" /&gt;

---

# Compute mean across all numeric columns for each journal


```r
citations %&gt;%
* group_by(journal) %&gt;%
* summarize(across(where(is.numeric), mean))
```

```
## # A tibble: 20 √ó 8
##    journal impactfactor pubyear Volume nbtweets `Number of use‚Ä¶` `Twitter reach`
##    &lt;fct&gt;          &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;            &lt;dbl&gt;           &lt;dbl&gt;
##  1 Animal‚Ä¶         3.21   2013.  16.5     12.4              9.71          28345.
##  2 Conser‚Ä¶         6.4    2013.   6.02    10.2              8.85          23234.
##  3 Divers‚Ä¶         5.4    2013   19        1.90             1.77           2350.
##  4 Ecolog‚Ä¶         5.06   2013   23        2.60             2.5            5727.
##  5 Ecology         6.16   2013   94        3.10             2.87           6176.
##  6 Ecolog‚Ä¶        16.7    2013.  16.0     14.5             14.0           44748.
##  7 Evolut‚Ä¶         5.25   2013   67        3.10             2.93           7762.
##  8 Evolut‚Ä¶         4.6    2013.   6.05     3.22             3.07          13185.
##  9 Fish a‚Ä¶         8.1    2013   14        7.25             6.19          12097.
## 10 Functi‚Ä¶         5.28   2013   27        2.87             2.74           3809.
## 11 Global‚Ä¶         8.7    2013   19        5.68             4.94           9652.
## 12 Global‚Ä¶         7.18   2013   22        3.51             3.15           8995.
## 13 Journa‚Ä¶         5.32   2013.  81.9      5.98             5.59          36112.
## 14 Journa‚Ä¶         5.93   2013   50       18.7             15.8           43839.
## 15 Journa‚Ä¶         4.59   2013   40        1.94             1.86          11632.
## 16 Limnol‚Ä¶         4.4    2013   58        0                0                 0 
## 17 Mammal‚Ä¶         4.3    2013.  43.0      5.35             4.39          10485.
## 18 Method‚Ä¶         7.39   2013.   4.2      7.77             7.14          15867.
## 19 Molecu‚Ä¶         4.9    2013   13        2.57             2.24          19844.
## 20 New Ph‚Ä¶         7.8    2013  198.       3.53             3.15           6340.
## # ‚Ä¶ with 1 more variable: woscitations &lt;dbl&gt;
```

---

## &lt;https://github.com/courtiol/Rguides&gt;

&lt;img src="assets/img/dplyr_guide_for_one_table_part2.png" width="85%" style="display: block; margin: auto;" /&gt;



---

# Tidying tibbles 

&lt;img src="assets/img/original-dfs-tidy.png" width="70%" style="display: block; margin: auto;" /&gt;

---

## Going from **long** to **wide** format and vice-versa

&lt;img src="assets/img/tidyr-longer-wider.gif" width="70%" style="display: block; margin: auto;" /&gt;



---

# To dive deeper in data manipulation with the tidyverse

* [Learn the tidyverse](https://www.tidyverse.org/learn/): books, workshops and online courses


* My selection of books:
   - [R for Data Science](https://r4ds.had.co.nz/) et [Advanced R](http://adv-r.had.co.nz/)
   - [Introduction √† R et au tidyverse](https://juba.github.io/tidyverse/)


* [Tidy Tuesdays videos](https://www.youtube.com/user/safe4democracy/videos) by D. Robinson 

* Material of the [2-day workshop Data Science in the tidyverse](https://github.com/cwickham/data-science-in-tidyverse) held at the RStudio 2019 conference


* Material of the stat545 course on [Data wrangling, exploration, and analysis with R](https://stat545.com/) at the University of British Columbia


* List of best R packages (with their description) on [data import, wrangling and visualization](https://www.computerworld.com/article/2921176/business-intelligence/great-r-packages-for-data-import-wrangling-visualization.html)

---

# [How to switch from base R to tidyverse?](https://www.significantdigits.org/2017/10/switching-from-base-r-to-tidyverse/)

&lt;img src="assets/img/switch_baseR_tidyverse.png" width="800px" style="display: block; margin: auto;" /&gt;

---

# The [RStudio Cheat Sheets](https://www.rstudio.com/resources/cheatsheets/)

&lt;img src="assets/img/cheatsheet_dplyr.png" width="600px" style="display: block; margin: auto;" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
